model Issue {
  id           Int       @id @default(autoincrement())
  issueNo      String    @unique
  itemId       Int       @map("toolId")
  issuedBy     Int
  issuedTo     String?
  remarks      String?
  companyId    Int
  contractorId Int
  machineId    Int
  locationId   Int
  isActive     Boolean   @default(true)
  isReturned   Boolean   @default(false)
  issuedAt     DateTime  @default(now())
  updatedAt    DateTime  @updatedAt

  // Relations
  item         Item      @relation("ItemIssues", fields: [itemId], references: [id], onDelete: Cascade)
  issuedByUser User      @relation("IssuedBy", fields: [issuedBy], references: [id], onDelete: Cascade)
  company      Company   @relation(fields: [companyId], references: [id], onDelete: Restrict)
  contractor   Contractor @relation(fields: [contractorId], references: [id], onDelete: Restrict)
  machine      Machine   @relation(fields: [machineId], references: [id], onDelete: Restrict)
  location     Location  @relation(fields: [locationId], references: [id], onDelete: Restrict)
  returns      Return[]  // returns from this issue (when issueId set)

  @@map("issues")
  @@index([itemId])
  @@index([issuedBy])
  @@index([companyId])
  @@index([contractorId])
  @@index([machineId])
  @@index([locationId])
}
